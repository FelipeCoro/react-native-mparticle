name: "Build and Test"

on:
  pull_request:
  push:
  workflow_call:
  workflow_dispatch:

  # Run daily at midnight
  schedule:
    - cron: "0 0 * * *"

jobs:
    js-tests:
      name: "JS Tests"
      runs-on: macOS-latest
      steps:
      - name: "Checkout"
        uses: actions/checkout@v3
      - uses: actions/setup-node@master
      - uses: c-hive/gha-yarn-cache@v2

      - name: "Install node modules"
        run: |
          yarn install
          
      - name: "Run test"
        run: |
          yarn test

    android-unit-tests:
      name: "Android Unit Tests"
      runs-on: ubuntu-latest
      steps:
          - name: "Checkout"
            uses: actions/checkout@v3
          
          - name: "Run Android Unit Tests"
            working-directory: android
            run: ./gradlew test